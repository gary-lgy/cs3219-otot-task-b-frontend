(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{115:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(8),o=n.n(c),u=(n(90),n(149)),i=n(160),s=n(32),l=n(28),m=n(11),p=n(150),f=n(151),h=n(152),d=n(153),b=n(154),g=n(71),v=n.n(g),E=Object(u.a)({title:{flexGrow:1}}),w=Object(m.g)((function(){var e=E(),t=Object(m.f)();return r.a.createElement(p.a,{position:"static"},r.a.createElement(f.a,null,r.a.createElement(i.a,{className:e.title},r.a.createElement(h.a,{color:"inherit",onClick:function(){t.push("/")}},r.a.createElement(d.a,{variant:"h6"},"Quotes"))),r.a.createElement(b.a,{color:"inherit",onClick:function(){t.push("/new")}},r.a.createElement(v.a,null))))})),x=n(10),j=n.n(x),O=n(19),k=n(27),y=n(41),N=n.n(y),S="".concat("http://localhost:3001/api/v1","/quotes"),q=function(e){return"".concat(S,"/").concat(e)},C=function(){var e=Object(O.a)(j.a.mark((function e(t){var n,a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{success:!0,data:n.data});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{success:!1,message:null!==(a=null===(r=e.t0.response)||void 0===r?void 0:r.message)&&void 0!==a?a:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(O.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(N.a.get(S));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(O.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(N.a.get(q(t)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(O.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(N.a.post(S,{content:t,authorName:n}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),L=function(){var e=Object(O.a)(j.a.mark((function e(t,n,a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(N.a.put(q(t),{content:n,authorName:a}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),W=function(){var e=Object(O.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C(N.a.delete(q(t))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=n(155),Q=n(159),T=Object(u.a)((function(e){return{root:{width:"80%",marginLeft:"auto",marginRight:"auto",padding:e.spacing(2)},header:{textAlign:"center"},form:{marginRight:e.spacing(4),marginLeft:e.spacing(4),"& > *":{marginTop:e.spacing(2)}},button:{marginTop:e.spacing(3)}}})),J=function(e){var t=e.handleSubmit,n=e.header,c=e.action,o=e.initialAuthorName,u=e.initialContent,s=T(),l=Object(a.useState)(o||""),m=Object(k.a)(l,2),p=m[0],f=m[1],b=Object(a.useState)(u||""),g=Object(k.a)(b,2),v=g[0],E=g[1];return r.a.createElement(D.a,{className:s.root},r.a.createElement(d.a,{variant:"h2",className:s.header},n),r.a.createElement("form",{noValidate:!0,autoComplete:"off",className:s.form},r.a.createElement(Q.a,{label:"Author name",required:!0,fullWidth:!0,onChange:function(e){return f(e.target.value)},value:p}),r.a.createElement(Q.a,{label:"Body",multiline:!0,fullWidth:!0,required:!0,onChange:function(e){return E(e.target.value)},value:v}),r.a.createElement(i.a,{textAlign:"center"},r.a.createElement(h.a,{variant:"contained",color:"primary",onClick:function(){return t(p,v)},className:s.button},c))))},R=n(156),G=Object(u.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center"},spinner:{marginBottom:e.spacing(2)},centerBox:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}})),M=function(e){var t=e.text,n=G();return r.a.createElement("div",{className:n.root},r.a.createElement(R.a,{className:n.spinner}),r.a.createElement(d.a,{variant:"h5"},t))},V=function(e){var t=e.text,n=G();return r.a.createElement(i.a,{className:n.centerBox},r.a.createElement(M,{text:t}))},$=Object(m.g)((function(e){var t=e.match.params.quoteId,n=Object(a.useState)(null),c=Object(k.a)(n,2),o=c[0],u=c[1],i=Object(a.useState)(!0),l=Object(k.a)(i,2),p=l[0],f=l[1],h=Object(s.b)().enqueueSnackbar;Object(a.useEffect)((function(){A(t).then((function(e){e.success?(u(e.data.quote),f(!1)):h("Something went wrong: ".concat(e.message),{variant:"error"})}))}),[h,t]);var d=Object(m.f)(),b=function(){var e=Object(O.a)(j.a.mark((function e(n,a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L(t,a,n);case 3:d.push("/"),h("Quote updated",{variant:"success"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),h("Something went wrong: ".concat(e.t0.message),{variant:"error"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}();return null===o||p?r.a.createElement(V,{text:"Loading..."}):r.a.createElement(J,{handleSubmit:b,header:"Edit quote",action:"Edit",initialAuthorName:o.authorName,initialContent:o.content})})),z=Object(m.g)((function(){var e=Object(s.b)().enqueueSnackbar,t=Object(m.f)(),n=function(){var n=Object(O.a)(j.a.mark((function n(a,r){return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,I(r,a);case 3:t.push("/"),e("New quote created",{variant:"success"}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),e("Something went wrong ".concat(n.t0.message),{variant:"error"});case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e,t){return n.apply(this,arguments)}}();return r.a.createElement(J,{handleSubmit:n,header:"Create new quote",action:"Create"})})),F=n(157),H=n(158),K=n(73),P=n.n(K),U=n(72),X=n.n(U),Y=Object(u.a)((function(e){return{cardContent:{margin:e.spacing(2)}}})),Z=Object(m.g)((function(e){var t=e.quote,n=e.handleEdit,a=e.handleDelete,c=t.authorName,o=t.content,u=Y();return r.a.createElement(D.a,{raised:!0},r.a.createElement(F.a,{className:u.cardContent},r.a.createElement(d.a,{variant:"h2",gutterBottom:!0},"".concat(o)),r.a.createElement(d.a,{color:"textSecondary",align:"right"},"- ".concat(c))),r.a.createElement(H.a,null,r.a.createElement(b.a,{onClick:n},r.a.createElement(X.a,null)),r.a.createElement(b.a,{onClick:a},r.a.createElement(P.a,null))))})),_=Object(u.a)((function(e){return{quotesBox:{width:"80%",margin:"0 auto","& > *":{marginBottom:e.spacing(4)}},centerBox:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}})),ee=Object(m.g)((function(){var e=_(),t=Object(a.useState)(null),n=Object(k.a)(t,2),c=n[0],o=n[1],u=Object(a.useState)(!0),p=Object(k.a)(u,2),f=p[0],h=p[1],b=Object(s.b)().enqueueSnackbar,g=Object(m.f)(),v=function(){var e=Object(O.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W(t);case 3:b("Quote deleted"),h(!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),b("Something went wrong: ".concat(e.t0.message),{variant:"error"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){f&&B().then((function(e){h(!1),e.success?o(e.data.quotes):b("Something went wrong: ".concat(e.message),{variant:"error"})}))}),[b,f,h]),null===c||f?r.a.createElement(V,{text:"Loading..."}):c.length?r.a.createElement(i.a,{className:e.quotesBox},c.map((function(e){return r.a.createElement(Z,{key:e.id,quote:e,handleEdit:function(){return t=e.id,void g.push("/edit/".concat(t));var t},handleDelete:function(){return v(e.id)}})}))):r.a.createElement(i.a,{className:e.centerBox},r.a.createElement(d.a,{variant:"h4",align:"center"},"No quotes yet."),r.a.createElement(l.b,{to:"/new"},r.a.createElement(d.a,{variant:"h5",align:"center"},"Create one")))})),te=Object(u.a)((function(e){return{body:{marginTop:e.spacing(8)}}})),ne=function(){var e=te();return r.a.createElement(s.a,{maxSnack:5},r.a.createElement(l.a,{basename:"/cs3219-otot-task-b-frontend"},r.a.createElement(w,null),r.a.createElement(i.a,{className:e.body},r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/"},r.a.createElement(ee,null)),r.a.createElement(m.a,{exact:!0,path:"/new"},r.a.createElement(z,null)),r.a.createElement(m.a,{exact:!0,path:"/edit/:quoteId"},r.a.createElement($,null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ne,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},85:function(e,t,n){e.exports=n(115)},90:function(e,t,n){}},[[85,1,2]]]);
//# sourceMappingURL=main.fe6bc5c0.chunk.js.map